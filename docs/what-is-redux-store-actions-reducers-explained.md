# Redux æ˜¯ä»€ä¹ˆï¼Ÿä¸ºåˆå­¦è€…è§£é‡Šçš„å­˜å‚¨ã€åŠ¨ä½œå’Œå‡å°‘å™¨

> åŸæ–‡ï¼š<https://www.freecodecamp.org/news/what-is-redux-store-actions-reducers-explained/>

Redux æ˜¯ JavaScript åº”ç”¨ç¨‹åºçš„å¯é¢„æµ‹çŠ¶æ€å®¹å™¨ã€‚é‚£ä¹ˆè¿™åˆ°åº•æ„å‘³ç€ä»€ä¹ˆå‘¢ï¼Ÿ

å¦‚æœæˆ‘ä»¬æ›´æ·±å…¥åœ°ç ”ç©¶è¿™ä¸€é™ˆè¿°ï¼Œæˆ‘ä»¬ä¼šå‘ç° Redux æ˜¯ä¸€ä¸ªçŠ¶æ€ç®¡ç†åº“ï¼Œæ‚¨å¯ä»¥å°†å®ƒç”¨äºä»»ä½• JS åº“æˆ–æ¡†æ¶ï¼Œå¦‚ Reactã€Angular æˆ– Vueã€‚

![1-1](img/77654824cd8d46378243541fb2a6fe5e.png)

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®º Redux çš„åŸºç¡€çŸ¥è¯†ã€‚æˆ‘ä»¬å°†äº†è§£ Redux çš„æ ¸å¿ƒæ˜¯ä»€ä¹ˆï¼Œä»¥åŠå®ƒçš„ä¸‰ä¸ªå…³é”®åŸåˆ™ã€‚

æˆ‘ä»¬è¿˜å°†çœ‹åˆ°å®ƒçš„ä¸€äº›æ ¸å¿ƒæ„ä»¶æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œæ¯”å¦‚å­˜å‚¨ã€åŠ¨ä½œå’Œ reducersï¼Œä»¥åŠå®ƒä»¬æ˜¯å¦‚ä½•ç»„åˆåœ¨ä¸€èµ·ï¼Œä½¿ Redux æˆä¸ºç°åœ¨è¿™æ ·çš„å…¨å±€çŠ¶æ€ç®¡ç†åº“çš„ã€‚

ä½œä¸ºå…ˆå†³æ¡ä»¶ï¼Œæˆ‘å°†å‡è®¾ä½ ç†Ÿæ‚‰ Reactã€‚

## ä¸ºä»€ä¹ˆè¦ç”¨ Reduxï¼Ÿ

ä¸€ä¸ªåº”ç”¨ç¨‹åºæœ‰å®ƒçš„çŠ¶æ€ï¼Œå¯ä»¥æ˜¯å®ƒå†…éƒ¨ç»„ä»¶çŠ¶æ€çš„ç»„åˆã€‚

æˆ‘ä»¬ä»¥ä¸€ä¸ªç”µå­å•†åŠ¡ç½‘ç«™ä¸ºä¾‹ã€‚ä¸€ä¸ªç”µå­å•†åŠ¡ç½‘ç«™å°†æœ‰å‡ ä¸ªç»„ä»¶ï¼Œå¦‚è´­ç‰©è½¦ç»„ä»¶ã€ç”¨æˆ·é…ç½®æ–‡ä»¶ç»„ä»¶ã€ä»¥å‰æŸ¥çœ‹çš„éƒ¨åˆ†ç»„ä»¶ç­‰ã€‚

æˆ‘ä»¬å°†é‡‡ç”¨æ˜¾ç¤ºç”¨æˆ·è´­ç‰©è½¦ä¸­å•†å“æ•°é‡çš„è´­ç‰©è½¦ç»„ä»¶ã€‚è´­ç‰©è½¦ç»„ä»¶çš„çŠ¶æ€å°†ç”±ç”¨æˆ·æ·»åŠ åˆ°è´­ç‰©è½¦ä¸­çš„æ‰€æœ‰å•†å“ä»¥åŠè¿™äº›å•†å“çš„æ€»æ•°ç»„æˆã€‚åœ¨åº”ç”¨ç¨‹åºå¯åŠ¨å¹¶è¿è¡Œçš„ä»»ä½•æ—¶å€™ï¼Œè¯¥ç»„ä»¶éƒ½å¿…é¡»æ˜¾ç¤ºç”¨æˆ·è´­ç‰©è½¦ä¸­æ›´æ–°çš„å•†å“æ•°é‡ã€‚

æ¯å½“ç”¨æˆ·å‘è´­ç‰©è½¦æ·»åŠ å•†å“æ—¶ï¼Œåº”ç”¨ç¨‹åºå¿…é¡»é€šè¿‡å°†è¯¥å•†å“æ·»åŠ åˆ°è´­ç‰©è½¦å¯¹è±¡æ¥å†…éƒ¨å¤„ç†è¯¥åŠ¨ä½œã€‚å®ƒå¿…é¡»åœ¨å†…éƒ¨ç»´æŠ¤å…¶çŠ¶æ€ï¼Œå¹¶åœ¨ UI ä¸­å‘ç”¨æˆ·æ˜¾ç¤ºè´­ç‰©è½¦ä¸­çš„å•†å“æ€»æ•°ã€‚

ç±»ä¼¼åœ°ï¼Œä»è´­ç‰©è½¦ä¸­åˆ é™¤ä¸€ä¸ªå•†å“ä¼šå‡å°‘è´­ç‰©è½¦ä¸­çš„å•†å“æ•°é‡ã€‚å®ƒåº”è¯¥ä»è´­ç‰©è½¦å¯¹è±¡ä¸­ç§»é™¤å•†å“ï¼Œå¹¶åœ¨ UI ä¸­æ˜¾ç¤ºè´­ç‰©è½¦ä¸­æ›´æ–°åçš„å•†å“æ€»æ•°ã€‚

æˆ‘ä»¬å¯ä»¥å¾ˆå¥½åœ°ç»´æŠ¤ç»„ä»¶çš„å†…éƒ¨çŠ¶æ€ï¼Œä½†æ˜¯å½“åº”ç”¨ç¨‹åºå˜å¤§æ—¶ï¼Œå®ƒå¯èƒ½éœ€è¦åœ¨ç»„ä»¶ä¹‹é—´å…±äº«ä¸€äº›çŠ¶æ€ã€‚è¿™ä¸ä»…æ˜¯ä¸ºäº†åœ¨è§†å›¾ä¸­æ˜¾ç¤ºå®ƒä»¬ï¼Œä¹Ÿæ˜¯ä¸ºäº†ç®¡ç†æˆ–æ›´æ–°å®ƒä»¬ï¼Œæˆ–è€…åŸºäºå®ƒä»¬çš„å€¼æ‰§è¡Œä¸€äº›é€»è¾‘ã€‚

å½“åº”ç”¨ç¨‹åºå˜å¤§æ—¶ï¼Œæœ‰æ•ˆå¤„ç†æ¥è‡ªå¤šä¸ªç»„ä»¶çš„å¤šç§çŠ¶æ€çš„ä»»åŠ¡ä¼šå˜å¾—å¾ˆæœ‰æŒ‘æˆ˜æ€§ã€‚

è¿™å°±æ˜¯ Redux çš„ç”¨æ­¦ä¹‹åœ°ã€‚ä½œä¸ºä¸€ä¸ªçŠ¶æ€ç®¡ç†åº“ï¼ŒRedux å°†åŸºæœ¬ä¸Šå­˜å‚¨å’Œç®¡ç†åº”ç”¨ç¨‹åºçš„æ‰€æœ‰çŠ¶æ€ã€‚

å®ƒè¿˜ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€äº›é‡è¦çš„ APIï¼Œä½¿ç”¨è¿™äº› APIï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ç°æœ‰çŠ¶æ€è¿›è¡Œæ›´æ”¹ï¼Œä¹Ÿå¯ä»¥è·å–åº”ç”¨ç¨‹åºçš„å½“å‰çŠ¶æ€ã€‚

## Redux å‡­ä»€ä¹ˆå¯ä»¥é¢„æµ‹ï¼Ÿ

Redux ä¸­çš„çŠ¶æ€ä¸ºåªè¯»ã€‚Redux çš„å¯é¢„æµ‹æ€§åœ¨äºï¼Œè¦æ”¹å˜åº”ç”¨ç¨‹åºçš„çŠ¶æ€ï¼Œæˆ‘ä»¬éœ€è¦åˆ†æ´¾ä¸€ä¸ªåŠ¨ä½œï¼Œæè¿°æˆ‘ä»¬å¸Œæœ›åœ¨çŠ¶æ€ä¸­åšå‡ºä»€ä¹ˆæ ·çš„æ”¹å˜ã€‚

è¿™äº›åŠ¨ä½œç„¶åè¢«ç§°ä¸º reducerss çš„ä¸œè¥¿æ¶ˆè´¹ï¼Œreducer çš„æƒŸä¸€å·¥ä½œæ˜¯æ¥å—ä¸¤ä»¶äº‹(åŠ¨ä½œå’Œåº”ç”¨ç¨‹åºçš„å½“å‰çŠ¶æ€)å¹¶è¿”å›çŠ¶æ€çš„ä¸€ä¸ªæ–°çš„æ›´æ–°å®ä¾‹ã€‚

æˆ‘ä»¬å°†åœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚ä¸­æ›´å¤šåœ°è®¨è®ºåŠ¨ä½œå’Œç¼©å‡å™¨ã€‚

è¯·æ³¨æ„ï¼Œè¿˜åŸå™¨ä¸ä¼šæ”¹å˜çŠ¶æ€çš„ä»»ä½•éƒ¨åˆ†ã€‚æ›´ç¡®åˆ‡åœ°è¯´ï¼Œä¸€ä¸ªç¼©å‡å™¨ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„çŠ¶æ€å®ä¾‹ï¼Œå…¶ä¸­åŒ…å«æ‰€æœ‰å¿…è¦çš„æ›´æ–°ã€‚

æ®@ [ä¸¹Â·é˜¿å¸ƒæ‹‰è«å¤«](https://www.freecodecamp.org/news/what-is-redux-store-actions-reducers-explained/@gaearon)(Redux çš„åˆ›ä½œè€…)è‡ªå·±è¯´ï¼Œ

> â€œåŠ¨ä½œå¯ä»¥è¢«è®°å½•å¹¶åœ¨ä»¥åé‡æ”¾ï¼Œæ‰€ä»¥è¿™ä½¿å¾—çŠ¶æ€ç®¡ç†æ˜¯å¯é¢„æµ‹çš„ã€‚ä»¥åŒæ ·çš„é¡ºåºåšåŒæ ·çš„åŠ¨ä½œï¼Œä½ ä¼šä»¥åŒæ ·çš„çŠ¶æ€ç»“æŸã€‚â€

æ‰€ä»¥ç»§ç»­æˆ‘ä»¬ä¸Šé¢çš„ç”µå­å•†åŠ¡ç½‘ç«™çš„ä¾‹å­ï¼Œå¦‚æœè´­ç‰©è½¦çš„åˆå§‹çŠ¶æ€æ˜¯å®ƒæœ‰ 0 ä¸ªå•†å“ï¼Œé‚£ä¹ˆ**å‘è´­ç‰©è½¦æ·»åŠ ä¸€ä¸ªå•†å“**çš„åŠ¨ä½œå°†ä½¿è´­ç‰©è½¦ä¸­çš„å•†å“æ•°é‡å¢åŠ  1ã€‚å†æ¬¡è§¦å‘**å‘è´­ç‰©è½¦æ·»åŠ ä¸€ä»¶å•†å“**çš„åŠ¨ä½œä¼šå°†è´­ç‰©è½¦ä¸­çš„å•†å“æ•°é‡å¢åŠ åˆ° 2ã€‚

ç»™å®šä¸€ä¸ªåˆå§‹çŠ¶æ€ï¼Œæœ‰ä¸€ä¸ªæŒ‰ç‰¹å®šé¡ºåºæ’åˆ—çš„**åŠ¨ä½œ**çš„ç‰¹å®šåˆ—è¡¨ï¼Œå®ƒæ€»æ˜¯ä¸ºæˆ‘ä»¬æä¾›å®ä½“çš„å®Œå…¨ç›¸åŒçš„æœ€ç»ˆçŠ¶æ€ã€‚è¿™å°±æ˜¯ Redux å¦‚ä½•è®©çŠ¶æ€ç®¡ç†å˜å¾—å¯é¢„æµ‹ã€‚

åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥ Redux çš„æ ¸å¿ƒæ¦‚å¿µâ€”â€”å­˜å‚¨ã€åŠ¨ä½œå’Œ reducersã€‚

## Redux çš„æ ¸å¿ƒåŸåˆ™

![2](img/02a5616f11f632028f2dfbda12db46c9.png)

### 1.Redux åº—æ˜¯ä»€ä¹ˆï¼Ÿ

> åº”ç”¨ç¨‹åºçš„å…¨å±€çŠ¶æ€å­˜å‚¨åœ¨å•ä¸ªå­˜å‚¨çš„å¯¹è±¡æ ‘ä¸­â€”[Redux docs](https://redux.js.org/understanding/thinking-in-redux/three-principles)

Redux å­˜å‚¨æ˜¯ä¸»è¦çš„ä¸­å¤®å­˜å‚¨åŒºï¼Œå­˜å‚¨åº”ç”¨ç¨‹åºçš„æ‰€æœ‰çŠ¶æ€ã€‚å¯¹äºåº”ç”¨ç¨‹åºçš„çŠ¶æ€æ¥è¯´ï¼Œå®ƒåº”è¯¥è¢«è§†ä¸ºå¹¶ç»´æŠ¤ä¸ºä¸€ä¸ª**å•ä¸€çš„çœŸå®æ¥æº**ã€‚

å¦‚æœå°†`store`æä¾›ç»™ **App.js** (é€šè¿‡å°†`App`ç»„ä»¶åŒ…è£…åœ¨`<Provider>` `</Provider>`æ ‡ç­¾ä¸­)ï¼Œå¦‚ä¸‹é¢çš„ä»£ç ç‰‡æ®µæ‰€ç¤ºï¼Œé‚£ä¹ˆå®ƒçš„æ‰€æœ‰å­ç»„ä»¶(`App.js`çš„å­ç»„ä»¶)ä¹Ÿå¯ä»¥ä»å•†åº—è®¿é—®åº”ç”¨ç¨‹åºçš„çŠ¶æ€ã€‚è¿™ä½¿å¾—å®ƒä½œä¸ºä¸€ä¸ªå…¨çƒæ€§çš„å›½å®¶ã€‚

```
// src/index.js

import React from 'react'
import ReactDOM from 'react-dom'
import { Provider } from 'react-redux'

import { App } from './App'
import createStore from './createReduxStore'

const store = createStore()

// As of React 18
const root = ReactDOM.createRoot(document.getElementById('root'))
root.render(
  <Provider store={store}>
    <App />
  </Provider>
) 
```

![4](img/95dd7f9811a864101f09f11896ee5c1a.png)

æ•´ä¸ªåº”ç”¨ç¨‹åºçš„çŠ¶æ€ä»¥ **JS å¯¹è±¡æ ‘**çš„å½¢å¼å­˜å‚¨åœ¨**å•ä¸€å­˜å‚¨**ä¸­ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚

```
// this is how the store object structure looks like
{
    noOfItemInCart: 2,
    cart: [
        {
            bookName: "Harry Potter and the Chamber of Secrets",
            noOfItem: 1,
        },
        {
            bookName: "Harry Potter and the Prisoner of Azkaban",
            noOfItem: 1
        }
    ]
} 
```

### 2.Redux ä¸­æœ‰å“ªäº›åŠ¨ä½œï¼Ÿ

> æ”¹å˜çŠ¶æ€çš„å”¯ä¸€æ–¹æ³•æ˜¯å‘å‡ºä¸€ä¸ªåŠ¨ä½œï¼Œè¿™æ˜¯ä¸€ä¸ªæè¿°å‘ç”Ÿäº†ä»€ä¹ˆçš„å¯¹è±¡â€”[Redux Docs](https://redux.js.org/understanding/thinking-in-redux/three-principles)

å¦‚ä¸Šæ‰€è¿°ï¼ŒRedux ä¸­çš„çŠ¶æ€æ˜¯åªè¯»çš„ã€‚è¿™æœ‰åŠ©äºæ‚¨é™åˆ¶è§†å›¾çš„ä»»ä½•éƒ¨åˆ†æˆ–ä»»ä½•ç½‘ç»œè°ƒç”¨ç›´æ¥å†™å…¥/æ›´æ–°çŠ¶æ€ã€‚

ç›¸åï¼Œå¦‚æœæœ‰äººæƒ³æ”¹å˜åº”ç”¨ç¨‹åºçš„çŠ¶æ€ï¼Œé‚£ä¹ˆä»–ä»¬éœ€è¦é€šè¿‡å‘å‡ºæˆ–åˆ†æ´¾åŠ¨ä½œæ¥è¡¨è¾¾ä»–ä»¬çš„æ„å›¾ã€‚

è®©æˆ‘ä»¬ä»¥ä¸Šé¢çš„å•†åº—ä¸ºä¾‹ï¼Œæˆ‘ä»¬åœ¨å•†åº—é‡Œæœ‰ä¸¤æœ¬ä¹¦:*ã€Šå“ˆåˆ©Â·æ³¢ç‰¹ä¸å¯†å®¤ã€‹*å’Œ*ã€Šå“ˆåˆ©Â·æ³¢ç‰¹ä¸é˜¿å…¹å¡ç­çš„å›šå¾’ã€‹*ã€‚æ¯æœ¬åªæœ‰ä¸€ä»½ã€‚

ç°åœ¨ï¼Œå¦‚æœç”¨æˆ·æƒ³è¦å‘è´­ç‰©è½¦æ·»åŠ å¦ä¸€ä¸ªå•†å“ï¼Œé‚£ä¹ˆä»–ä»¬å¿…é¡»å•å‡»è¯¥å•†å“æ—è¾¹çš„**â€œæ·»åŠ åˆ°è´­ç‰©è½¦â€**æŒ‰é’®ã€‚

ç‚¹å‡»**â€œæ·»åŠ åˆ°è´­ç‰©è½¦â€**æŒ‰é’®ï¼Œå°†ä¼šåˆ†æ´¾ä¸€ä¸ªåŠ¨ä½œã€‚è¿™ä¸ªåŠ¨ä½œåªä¸è¿‡æ˜¯ä¸€ä¸ª JS å¯¹è±¡ï¼Œå®ƒæè¿°äº†éœ€è¦åœ¨å­˜å‚¨ä¸­è¿›è¡Œå“ªäº›æ›´æ”¹ã€‚å¤§æ¦‚æ˜¯è¿™æ ·çš„:

```
// Rest of the code

const dispatch = useDispatch()

const addItemToCart = () => {
return {
    type: "ADD_ITEM_TO_CART"
    payload: {
        bookName: "Harry Potter and the Goblet of Fire",
        noOfItem: 1,
        }
    }
}

<button onClick = {() => dispatch(addItemToCart())}>Add to cart</button>

// Rest of the code 
```

è¯·æ³¨æ„åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ˜¯å¦‚ä½•åœ¨ç‚¹å‡»æŒ‰é’®æ—¶åˆ†æ´¾åŠ¨ä½œçš„ã€‚æˆ–è€…æ›´ç¡®åˆ‡åœ°è¯´ï¼Œæˆ‘ä»¬åˆ†æ´¾äº†ä¸€ä¸ªå«åš**åŠ¨ä½œåˆ›å»ºå™¨**çš„ä¸œè¥¿â€”â€”ä¹Ÿå°±æ˜¯å‡½æ•°`addItemToCart()`ã€‚è¿™åˆè¿”å›ä¸€ä¸ª`action`ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ™®é€šçš„ JS å¯¹è±¡ï¼Œæè¿°äº†ç”±`type`é”®è¡¨ç¤ºçš„åŠ¨ä½œçš„ç›®çš„ï¼Œä»¥åŠçŠ¶æ€æ”¹å˜æ‰€éœ€çš„ä»»ä½•å…¶ä»–æ•°æ®ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¦æ·»åŠ åˆ°è´­ç‰©è½¦ä¸­çš„ä¹¦çš„åç§°ç”±`payload`é”®è¡¨ç¤ºã€‚

**æ¯ä¸ªåŠ¨ä½œå¿…é¡»è‡³å°‘æœ‰ä¸€ä¸ª`type`ä¸**ç›¸å…³è”ã€‚éœ€è¦ä¼ é€’çš„ä»»ä½•å…¶ä»–ç»†èŠ‚éƒ½æ˜¯å¯é€‰çš„ï¼Œå°†å–å†³äºæˆ‘ä»¬è°ƒåº¦çš„æ“ä½œç±»å‹ã€‚

ä¾‹å¦‚ï¼Œä¸Šé¢çš„ä»£ç ç‰‡æ®µè°ƒåº¦ä»¥ä¸‹æ“ä½œ:

```
// Action that got created by the action creator addItemToCart()

{
    type: "ADD_ITEM_TO_CART" // Note: Every action must have a type key
    payload: {
        bookName: "Harry Potter and the Goblet of Fire",
        noOfItem: 1,
    }
} 
```

### 3.Redux ä¸­çš„å‡é€Ÿå™¨æœ‰å“ªäº›ï¼Ÿ

> ä¸ºäº†æŒ‡å®šçŠ¶æ€æ ‘å¦‚ä½•è¢«åŠ¨ä½œè½¬æ¢ï¼Œæˆ‘ä»¬ç¼–å†™äº†çº¯ reducer-[Redux docs](https://redux.js.org/understanding/thinking-in-redux/three-principles)

![3](img/eac28473f67d9420fe6f8304f1ee89f6.png)

Reducersï¼Œé¡¾åæ€ä¹‰ï¼Œæ¥å—ä¸¤ä»¶äº‹:**å‰ä¸€ä¸ªçŠ¶æ€**å’Œ**ä¸€ä¸ªåŠ¨ä½œ**ã€‚ç„¶åä»–ä»¬å°†å®ƒç®€åŒ–(è¯»å–è¿”å›)ä¸ºä¸€ä¸ªå®ä½“:çŠ¶æ€çš„**æ–°çš„æ›´æ–°å®ä¾‹**ã€‚

æ‰€ä»¥ reducers åŸºæœ¬ä¸Šæ˜¯çº¯ç²¹çš„ JS å‡½æ•°ï¼Œå®ƒæ¥å—å‰ä¸€ä¸ªçŠ¶æ€å’Œä¸€ä¸ªåŠ¨ä½œï¼Œå¹¶è¿”å›æ–°æ›´æ–°çš„çŠ¶æ€ã€‚

å¦‚æœå®ƒæ˜¯ä¸€ä¸ªç®€å•çš„åº”ç”¨ç¨‹åºï¼Œå¯ä»¥æœ‰ä¸€ä¸ªç¼©å‡å™¨ï¼Œæˆ–è€…åœ¨ä¸€ä¸ªæ›´å¤§çš„åº”ç”¨ç¨‹åºä¸­ï¼Œå¯ä»¥æœ‰å¤šä¸ªç¼©å‡å™¨æ¥å¤„ç†å…¨å±€çŠ¶æ€çš„ä¸åŒéƒ¨åˆ†æˆ–ç‰‡æ®µã€‚

ä¾‹å¦‚ï¼Œåœ¨è´­ç‰©åº”ç”¨ç¨‹åºä¸­å¯ä»¥æœ‰ä¸€ä¸ªå¤„ç†è´­ç‰©è½¦çŠ¶æ€çš„ reducerï¼Œç„¶åå¯ä»¥æœ‰ä¸€ä¸ªå¤„ç†åº”ç”¨ç¨‹åºçš„ç”¨æˆ·ç»†èŠ‚éƒ¨åˆ†çš„ reducerï¼Œç­‰ç­‰ã€‚

æ¯å½“å‘å‡ºä¸€ä¸ªåŠ¨ä½œï¼Œ**æ‰€æœ‰çš„å‡é€Ÿå™¨éƒ½è¢«æ¿€æ´»**ã€‚æ¯ä¸ªå‡é€Ÿå™¨ä½¿ç”¨ä¸€ä¸ªå¼€å…³è¯­å¥è¿‡æ»¤åŠ¨ä½œï¼Œæ‰“å¼€**åŠ¨ä½œç±»å‹**ã€‚æ¯å½“ switch è¯­å¥ä¸ä¼ é€’çš„åŠ¨ä½œåŒ¹é…æ—¶ï¼Œç›¸åº”çš„ reducers å°±é‡‡å–å¿…è¦çš„åŠ¨ä½œè¿›è¡Œæ›´æ–°ï¼Œå¹¶è¿”å›å…¨å±€çŠ¶æ€çš„æ–°å®ä¾‹ã€‚

ç»§ç»­æˆ‘ä»¬ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰ä¸€ä¸ªå‡é€Ÿå™¨å¦‚ä¸‹:

```
 const initialCartState = {    
    noOfItemInCart: 0,          
    cart: []                              
}

// NOTE: 
// It is important to pass an initial state as default to 
// the state parameter to handle the case of calling 
// the reducers for the first time when the 
// state might be undefined

const cartReducer = (state = initialCartState, action) => {
    switch (action.type) {
        case "ADD_ITEM_TO_CART": 
            return {
                ...state,
                noOfItemInCart: state.noOfItemInCart + 1,
                cart : [
                    ...state.cart,
                    action.payload
                ]
            }
        case "DELETE_ITEM_FROM_CART":
            return {
                // Remaining logic
            }
        default: 
            return state  
    }       // Important to handle the default behaviour
}           // either by returning the whole state as it is 
            // or by performing any required logic 
```

åœ¨ä¸Šé¢çš„ä»£ç ç‰‡æ®µä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸º`cartReducer`çš„ç¼©å‡å™¨ï¼Œè¿™æ˜¯ä¸€ä¸ªçº¯ JS å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°:`state`å’Œ`action`ã€‚

æ³¨æ„ï¼Œ`state`å‚æ•°æ˜¯æ¥å—åˆå§‹çŠ¶æ€çš„é»˜è®¤å‚æ•°ã€‚è¿™æ˜¯ä¸ºäº†å¤„ç†`state`å€¼ä¸º`undefined`æ—¶**ç¬¬ä¸€æ¬¡è°ƒç”¨**å‡é€Ÿå™¨çš„åœºæ™¯ã€‚

è¿˜è¦æ³¨æ„ï¼Œæ¯ä¸ªç¼©å‡å™¨éƒ½åº”è¯¥å¤„ç†`default`æƒ…å†µï¼Œå¦‚æœæ²¡æœ‰ä¸€ä¸ªå¼€å…³æƒ…å†µä¸ä¼ é€’çš„åŠ¨ä½œåŒ¹é…ï¼Œé‚£ä¹ˆç¼©å‡å™¨åº”è¯¥åŸæ ·è¿”å›`state`æˆ–è€…åœ¨ä¼ é€’çŠ¶æ€ä¹‹å‰å¯¹å…¶æ‰§è¡Œä»»ä½•æ‰€éœ€çš„é€»è¾‘ã€‚

æ¯å½“æˆ‘ä»¬è°ƒåº¦æŸç§ç±»å‹çš„åŠ¨ä½œæ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿æœ‰åˆé€‚çš„ reducers æ¥å¤„ç†è¯¥åŠ¨ä½œã€‚

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œåœ¨ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œæˆ‘ä»¬å·²ç»åˆ†æ´¾äº†ä¸€ä¸ª**åŠ¨ä½œ**å’Œä¸€ä¸ªå«åš`addItemToCart()`çš„**åŠ¨ä½œåˆ›å»ºè€…**ã€‚è¯¥åŠ¨ä½œåˆ›å»ºè€…å·²ç»ç”¨`type` `ADD_ITEM_TO_CART`è°ƒåº¦äº†ä¸€ä¸ªåŠ¨ä½œã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸º`cartReducer`çš„**ç¼©å‡å™¨**ï¼Œå®ƒå°†çŠ¶æ€(é»˜è®¤åˆå§‹çŠ¶æ€)å’ŒåŠ¨ä½œä½œä¸ºå‚æ•°ã€‚å®ƒæ‰“å¼€**åŠ¨ä½œç±»å‹**ï¼Œç„¶åæ— è®ºå“ªç§æƒ…å†µä¸åˆ†æ´¾çš„åŠ¨ä½œç±»å‹åŒ¹é…ï¼Œå®ƒéƒ½è¿›è¡Œå¿…è¦çš„æ›´æ–°ï¼Œå¹¶è¿”å›æ›´æ–°çŠ¶æ€çš„å…¨æ–°ç‰ˆæœ¬ã€‚

è¿™é‡Œæ³¨æ„ redux ä¸­çš„**çŠ¶æ€æ˜¯ä¸å¯å˜çš„**ã€‚å› æ­¤ï¼Œreducers é¦–å…ˆåˆ¶ä½œæ•´ä¸ªå½“å‰çŠ¶æ€çš„å‰¯æœ¬ï¼Œè¿›è¡Œå¿…è¦çš„æ›´æ”¹ï¼Œç„¶åè¿”å›è¯¥çŠ¶æ€çš„ä¸€ä¸ªæ–°å®ä¾‹â€”â€”åŒ…å«æ‰€æœ‰å¿…è¦çš„æ›´æ”¹/æ›´æ–°ã€‚

æ‰€ä»¥åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆä½¿ç”¨æ‰©å±•æ“ä½œç¬¦`...state`å¤åˆ¶æ•´ä¸ªçŠ¶æ€ã€‚ç„¶åæˆ‘ä»¬å°†`noOfItemInCart`åŠ  1ï¼Œé€šè¿‡æ·»åŠ ä¸‹é¢æ‰€ç¤ºçš„`action.payload`ä¸­ä¼ é€’çš„æ–°å¯¹è±¡æ¥æ›´æ–°è´­ç‰©è½¦æ•°ç»„ï¼Œæœ€åè¿”å›æ›´æ–°åçš„å¯¹è±¡ã€‚

```
{
    bookName: "Harry Potter and the Goblet of Fire",
    noOfItem: 1,
} 
```

å‡é€Ÿå™¨æ›´æ–°çŠ¶æ€åï¼Œå¦‚æœæˆ‘ä»¬å»`console.log`å’Œ`state`ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¼šçœ‹åˆ°ä»¥ä¸‹ç»“æœ:

```
// Updated store

{
    noOfItemInCart: 3, // Incremented by 1
    cart: [
        {
            bookName: "Harry Potter and the Chamber of Secrets",
            noOfItem: 1,
        },
        {
            bookName: "Harry Potter and the Prisoner of Azkaban",
            noOfItem: 1
        },
        { // Newly added object
            bookName: "Harry Potter and the Goblet of Fire",
            noOfItem: 1,
        }
    ]
} 
```

## æ‘˜è¦

ç®€è€Œè¨€ä¹‹ï¼Œä»¥ä¸‹ä¸‰ä¸ªåŸåˆ™å®Œå…¨å†³å®šäº† Redux çš„å·¥ä½œæ–¹å¼:

*   åº”ç”¨ç¨‹åºçš„å…¨å±€çŠ¶æ€å­˜å‚¨åœ¨å•ä¸ª**å­˜å‚¨**ä¸­çš„å¯¹è±¡æ ‘ä¸­
*   æ”¹å˜çŠ¶æ€çš„å”¯ä¸€æ–¹æ³•æ˜¯å‘å‡ºä¸€ä¸ª**åŠ¨ä½œ**ï¼Œè¿™æ˜¯ä¸€ä¸ªæè¿°å‘ç”Ÿäº†ä»€ä¹ˆçš„å¯¹è±¡
*   ä¸ºäº†æŒ‡å®šçŠ¶æ€æ ‘å¦‚ä½•è¢«åŠ¨ä½œè½¬æ¢ï¼Œæˆ‘ä»¬ç¼–å†™äº†**çº¯å½’çº¦å™¨**

## åŒ…æ‰

æ„Ÿè°¢é˜…è¯»ï¼æˆ‘çœŸçš„å¸Œæœ›ä½ å–œæ¬¢å­¦ä¹  Redux å’Œå®ƒçš„æ ¸å¿ƒåŸåˆ™ï¼Œå¹¶ä¸”è§‰å¾—è¿™ç¯‡æ•™ç¨‹å¾ˆæœ‰ç”¨ã€‚

è¯·è€ƒè™‘ä¸ä½ çš„æœ‹å‹åˆ†äº«ï¼Œæˆ‘ä¼šéå¸¸æ„Ÿæ¿€ã€‚æ›´å¤šç²¾å½©å†…å®¹æ•¬è¯·æœŸå¾…ã€‚å®‰é™ç‚¹ã€‚ğŸ––

### ç¤¾ä¼šè”ç³»

*   [LinkedIn](https://www.linkedin.com/feed/)
*   [ç½‘ç«™](https://www.sohamderoy.dev/)
*   [å…¶ä»–åšå®¢](https://www.freecodecamp.org/news/author/sohamderoy)
*   [æ¨ç‰¹](https://twitter.com/_sohamderoy)