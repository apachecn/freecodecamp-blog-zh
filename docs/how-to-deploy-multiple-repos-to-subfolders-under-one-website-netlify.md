# å¦‚ä½•ä½¿ç”¨ Netlify å°†å¤šä¸ªå­˜å‚¨åº“éƒ¨ç½²åˆ°ä¸€ä¸ªç½‘ç«™ä¸‹çš„å­æ–‡ä»¶å¤¹ä¸­

> åŸæ–‡ï¼š<https://www.freecodecamp.org/news/how-to-deploy-multiple-repos-to-subfolders-under-one-website-netlify/>

ä½ å¥½ã€‚ğŸ‘‹æ‚¨åœ¨è¿™é‡Œå¯èƒ½æ˜¯å› ä¸ºæ‚¨æ­£è¯•å›¾ä½¿ç”¨ Netlify åœ¨ä¸€ä¸ªç½‘ç«™ä¸‹æ‰˜ç®¡ä¸¤ä¸ªç‹¬ç«‹çš„ç½‘ç«™æˆ–å­˜å‚¨åº“ã€‚

ä¹Ÿè®¸ä½ å·²ç»åœ¨ Netlify ç¤¾åŒºé¡µé¢ä¸Šæ‰¾åˆ°äº†ç­”æ¡ˆï¼Œä½†æ˜¯ä½ ä»ç„¶å¾ˆå›°æƒ‘ã€‚

åŒæ ·çš„å›°æƒ‘å’Œå¤´ç–¼è®©æˆ‘å†™äº†è¿™ç¯‡æ•™ç¨‹ï¼Œè¿™æ ·ä½ å°±ä¸ç”¨åƒæˆ‘ä¸€æ ·çº ç»“äº†ã€‚

è¿™å¾ˆæ£˜æ‰‹ä½†å¾ˆæœ‰æ•ˆ:è¿™ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ¡ˆæ˜¯`netlify.toml`æˆ–`_redirects file`ã€‚

è®©æˆ‘ä»¬è·³è¿›æ¥ã€‚

æˆ‘å’Œä¸€äº›åŒäº‹ä¸€èµ·åšä¸€ä¸ªé¡¹ç›®ï¼Œæˆ‘ä»¬æŠŠä»»åŠ¡åˆ†å¼€ï¼Œè¿™æ ·æˆ‘å°±å¯ä»¥åšæ–‡æ¡£äº†ã€‚

## æˆ‘ä»¬å°†åœ¨è¿™é‡Œä½¿ç”¨çš„æŠ€æœ¯

*   Docusaurus å¯ä»¥ç«‹åˆ»å‘å¸ƒæ¼‚äº®çš„æ–‡æ¡£ç½‘ç«™ã€‚
*   Next.js/React.js ä¸ºæˆ‘ä»¬çš„ä¸»è¦ç½‘ç«™

è®©æˆ‘ä»¬å¼€å§‹å§ï¼Œçœ‹çœ‹æˆ‘ä»¬å¦‚ä½•ä¿å­˜æ–‡æ¡£ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼åšåˆ°è¿™ä¸€ç‚¹:

1.  ä½¿ç”¨å­åŸŸ docs.mainsite.dev
2.  ä½¿ç”¨ä¸»åŸŸå mainsite.devï¼Œå°†æ–‡æ¡£ä½œä¸ºå­ç›®å½•å­˜æ”¾åœ¨ mainsite.dev/docs.ä¸Š

æ ¹æ®æˆ‘åœ¨å…¶ä»–é¡¹ç›®çš„æ–‡æ¡£ä¸­çœ‹åˆ°çš„å®ç°ï¼Œæˆ‘ä¹Ÿæƒ³é€šè¿‡ Netlify æŠŠå®ƒä½œä¸ºä¸€ä¸ªå­æ–‡ä»¶å¤¹ã€‚

æˆ‘æƒ³è¿™ä¼šè®©æˆ‘ä»¬çš„åŒ»ç”Ÿçœ‹èµ·æ¥æ›´ä¸“ä¸šã€‚

å¦‚æœä½ ä¹Ÿå°† docusaurus ä½œä¸ºå­æ–‡ä»¶å¤¹ï¼Œä½ éœ€è¦åšä¸€äº›è®¾ç½®ã€‚

## æ­¥éª¤ 1-æ›´æ–°åŸºæœ¬ URL

ä½¿ç”¨ä»¥ä¸‹ä»£ç å°† docusaurus.config.js æ–‡ä»¶ä¸­çš„ **baseUrl** æ›´æ”¹ä¸ºâ€œ**/docs/â€**:

```
 title: 'Your Docs Title',
  tagline: 'Your Docs Tagline',
  url: 'my-docs-site.netlify.app',
  baseUrl: "/docs/",
  onBrokenLinks: 'throw',
  onBrokenMarkdownLinks: 'warn',
  favicon: '/favicon.ico',
```

docusaurus.config.js

é€šè¿‡å°†æ‚¨çš„åŸºæœ¬ URL æ›´æ”¹ä¸º **/docs/** ï¼Œå®ƒä¼šä½¿æ‚¨çš„ç½‘ç«™å®Œå…¨å‘ˆç°ä¸ºã€https://mainsite.dev/docs/ã€‘çš„**ï¼Œè¿™æ˜¯ docs è·¯å¾„ã€‚**

**å¦‚æœæ‚¨å°† **baseUrl** è®¾ç½®ä¸ºâ€œ/â€ï¼Œå°†ä¼šå‡ºç°é”™è¯¯ã€‚è¿™ä¹Ÿæ„å‘³ç€æˆ‘ä»¬ä¸å¿…å¤„ç†ä»£ç†æˆ‘ä»¬çš„æ–‡æ¡£ç½‘ç«™ã€‚**

## **æ­¥éª¤ 2â€“æ›´æ–° routeBasePath**

**æ‚¨è¿˜éœ€è¦é€šè¿‡å°† **routeBasePath** æ›´æ”¹ä¸º **'/'** ï¼Œç¡®ä¿æ–‡æ¡£å†…å®¹æ˜¯ä»æ‚¨çš„æ ¹åŸŸæä¾›çš„ã€‚**

**å°±åƒæ‚¨åœ¨ä¸‹é¢çš„ç‰‡æ®µä¸­çœ‹åˆ°çš„é‚£æ ·:**

```
 `presets: [
    [
      'classic',
      /** @type {import('@docusaurus/preset-classic').Options} */
      ({
        docs: {
          routeBasePath: '/',
        },
      }),
    ],
  ],`
```

**docusaurus.config.js**

**è¿™å°†å¸®åŠ©æ‚¨æ¿€æ´» docusaurus ä¸Šçš„ä»…æ–‡æ¡£æ¨¡å¼ã€‚è¿™æ ·ï¼Œæ‚¨çš„æ–‡æ¡£å°†ä»æ‚¨çš„æ ¹åŸŸæä¾›ï¼Œä½†è·¯å¾„â€œ/docs/â€æ˜¯åŸºæœ¬è·¯å¾„ã€‚**

**ä¹‹åï¼Œæ‚¨å¯ä»¥åœ¨æ‚¨çš„æœ¬åœ°ä¸»æœºä¸Šè¿è¡Œ`npx docusaurus start`,çœ‹çœ‹æ‚¨çš„ docs ç«™ç‚¹èƒ½å¦é¡ºåˆ©æ„å»ºå’Œå‘ˆç°ã€‚**

**å¦‚æœæ²¡æœ‰é—®é¢˜ï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„å†…å®¹:**

**![docusaurus-run-localhost-1](img/fd97dd8de4ee437ff0ccfa5e2517458f.png)

Your docusaurus site should render like this on path '/docs/' being the base path.** 

**è¦äº†è§£æ›´å¤šå…³äº docusaurus docs only æ¨¡å¼çš„é…ç½®ï¼Œæ‚¨å¯ä»¥é˜…è¯» [this](https://docusaurus.io/docs/docs-introduction#docs-only-mode) ã€‚**

## **æ­¥éª¤ 3â€“éƒ¨ç½²åˆ°ç½‘ç»œç”Ÿæ´»**

**ç°åœ¨æ˜¯æ—¶å€™å°†æ‚¨çš„ docs ç«™ç‚¹éƒ¨ç½²åˆ° Netlify äº†ã€‚å¦‚æœä½ è¿˜ä¸çŸ¥é“æ€ä¹ˆåšï¼Œä½ å¯ä»¥å‚è€ƒè¿™ä¸ª[æŒ‡å—](https://docusaurus.io/docs/deployment#deploying-to-netlify)ã€‚**

**å®Œæˆéƒ¨ç½²åï¼Œæ‚¨çš„ Netlify ç½‘ç«™ URL åº”è¯¥å·²ç»å¯ç”¨ï¼Œå¦‚ä¸‹æ‰€ç¤º:// my-docs-site.netlify.appã€‚**

## **ç¬¬ 4 æ­¥â€“ä»£ç†**

**æ¥ä¸‹æ¥å°±æ˜¯ä½ è¦åšä»£ç†çš„éƒ¨åˆ†äº†ã€‚**

**æ‚¨å·²ç»åœ¨ Netlify ä¸Šæ‰˜ç®¡äº†æ‚¨çš„ä¸»ç½‘ç«™ï¼Œå¹¶ä¸”æ‚¨çš„æ–‡æ¡£ç«™ç‚¹ä¹Ÿå·²éƒ¨ç½²åˆ° Netlifyã€‚**

**ç°åœ¨ï¼Œæ‚¨éœ€è¦åœ¨ä¸»ç½‘ç«™çš„é¡¹ç›®/èµ„æºåº“çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª *netlify.toml* æ–‡ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ ä»¥ä¸‹å‡ è¡Œ:**

```
`[[redirects]]
from = "/docs/*"
to = "https://my-docs-site.netlify.app/:splat"
status = 200
force = false`
```

**ä»¥ä¸Šè§„åˆ™ç¡®ä¿äº†æ— è®ºä½•æ—¶åœ¨æ‚¨çš„ä¸»ç«™ç‚¹ä¸ŠæŸ¥è¯¢/docs/ pathï¼Œæ‚¨çš„ docs ç«™ç‚¹éƒ½ä¼šåœ¨æ‚¨çš„ main-website.netlify.app/docs/è·¯å¾„ä¸Šæ­£å¸¸åŠ è½½ã€‚**

**æˆ–è€…ï¼Œæ‚¨ä¹Ÿå¯ä»¥é€šè¿‡æ‚¨çš„æ–‡æ¡£ç½‘ç«™/å­˜å‚¨åº“è¿›è¡Œä»£ç†ã€‚åªéœ€åœ¨ docs ç«™ç‚¹/å­˜å‚¨åº“çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª netlify.toml æ–‡ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ ä»¥ä¸‹å‡ è¡Œ:**

```
`[[redirects]]
from = "/*"
to = "https://main-website.netlify.app/docs/:splat"
status = 301
force = true`
```

**ä¸Šé¢çš„è§„åˆ™ç¡®ä¿äº†æ— è®ºä½•æ—¶åœ¨ docs ç«™ç‚¹ä¸ŠæŸ¥è¯¢/*è·¯å¾„ï¼Œå®ƒéƒ½ä¼šåœ¨æ‚¨çš„ main-website.netlify.app/docs/è·¯å¾„ä¸Šæ­£å¸¸åŠ è½½ã€‚**

**æ‚¨è¿˜ä¼šæ³¨æ„åˆ°ï¼Œæ‚¨åœ¨ Netlify ç«™ç‚¹ä¸Šçš„ docs ç«™ç‚¹å·²æŸåï¼Œä½†å®ƒåœ¨æ‚¨çš„ä¸»ç«™ç‚¹ä¸Šè¿è¡Œè‰¯å¥½ã€‚**

**æ—¢ç„¶å®ƒæœ‰æ•ˆï¼Œæˆ‘ä»¬ä¹Ÿè¾¾åˆ°äº†ç›®æ ‡ï¼Œé‚£å°±é¡ºå…¶è‡ªç„¶å§ğŸ˜ã€‚**

**![docs-site-netlify-error](img/b22ef1f2eb5fb699a52fac56560778a2.png)

Broken docusaurus site for subfolder documentation** 

****æ³¨æ„:**ä¸è¦åŒæ—¶å°†è§„åˆ™æ·»åŠ åˆ°æ‚¨çš„æ–‡æ¡£ç«™ç‚¹å’Œä¸»ç«™ç‚¹ï¼Œå› ä¸ºè¿™å°†å¯¼è‡´â€œå¤ªå¤šé‡å®šå‘â€é”™è¯¯çš„å†²çªã€‚**

**æ‰€ä»¥ä½ è¦ä¹ˆæŠŠè§„åˆ™æ·»åŠ åˆ°ä½ çš„æ–‡æ¡£ç«™ç‚¹ï¼Œè¦ä¹ˆæ·»åŠ åˆ°ä½ çš„ä¸»ç«™ç‚¹ï¼Œä½†ä¸èƒ½ä¸¤è€…éƒ½æ·»åŠ ã€‚**

## **è®©æˆ‘ä»¬å›ç­”ä¸€äº›é—®é¢˜**

**é—®:ä¸ºä»€ä¹ˆæˆ‘ä¼šé€‰æ‹©ä½¿ç”¨ *netlify.toml* æ–‡ä»¶ï¼Œè€Œä¸æ˜¯*é‡å®šå‘*æ–‡ä»¶ï¼Ÿ**

**æ˜¯çš„ï¼Œæˆ‘é¦–å…ˆé€‰æ‹©äº†ç®€å•çš„é€‰é¡¹ï¼Œå¹¶å°è¯•äº† _redirects æ–‡ä»¶ã€‚ä½†è¿™å¹¶ä¸å®¹æ˜“ï¼Œå› ä¸ºåœ¨æ„å»ºä½ çš„ Netlify ç«™ç‚¹æ—¶ï¼Œä½ å¿…é¡»æ€»æ˜¯å°† *_redirects* æ–‡ä»¶å¤åˆ¶åˆ°ä½ çš„ **build/** æˆ– **public/** æ–‡ä»¶å¤¹ä¸­ã€‚**

**è¿™è¦æ±‚æ‚¨å°†æ‚¨çš„ Netlify æ„å»ºè®¾ç½®ç¼–è¾‘æˆå¦‚ä¸‹æ‰€ç¤º:**

```
`npm run build && cp _redirects public/`
```

**netlify _redirects fileÂ **

**æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ *_redirects* æ–‡ä»¶æ¥å®ç°ä»£ç†ã€‚ä¸»ç«™ç‚¹çš„è§„åˆ™å°†é‡‡ç”¨ä»¥ä¸‹æ ¼å¼:**

```
`/docs/* https://my-docs-site.netlify.app/:splat 200`
```

**netlify _redirects fileÂ **

**å¯¹äºæ‚¨çš„æ–‡æ¡£ç½‘ç«™ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹æ ¼å¼:**

```
`/* https://main-website.netlify.app/docs/:splat 301!`
```

**netlify _redirects fileÂ **

****é—®:**ä¸ºä»€ä¹ˆæˆ‘ä¼šé€‰æ‹©åœ¨æ‰€æœ‰ä»£ç†è§„åˆ™ä¸­ä½¿ç”¨ Netlify URLsï¼Œè€Œä¸æ˜¯æˆ‘ä»¬çš„è‡ªå®šä¹‰åŸŸ URLï¼Ÿ**

**Netlify ç¤¾åŒºå»ºè®®æ‚¨ä½¿ç”¨ Netlify URLsï¼Œå› ä¸ºè¿™æ˜¯ä¸€ç§æ›´å¯é çš„ä»£ç†æ–¹å¼ã€‚**

## **ç»“è®º**

**æ­å–œğŸ‰ï¼Œå¾ˆé«˜å…´æ‚¨é˜…è¯»å®Œäº†æœ¬æŒ‡å—ã€‚**

**æˆ‘ç›¸ä¿¡ä½ ä»Šå¤©å­¦åˆ°äº†ä¸€äº›æ–°ä¸œè¥¿ã€‚**

**æ˜¯æ—¶å€™å®ç°äº†ï¼Œè®©ä½ çš„é¡¹ç›®æ–‡æ¡£çœ‹èµ·æ¥ä¹Ÿå¾ˆä¸“ä¸šï¼ŒæŠŠå®ƒæ”¾åœ¨ä½ çš„ä¸»ç«™ç‚¹çš„å­æ–‡ä»¶å¤¹ä¸­ã€‚ğŸ‘ã€‚**

**ä½ ä¹Ÿå¯ä»¥åˆ†äº«è¿™ç¯‡æ–‡ç« ï¼Œè®©åˆ«äººçœ‹åˆ°ã€‚**

## **èµ„æº:**

*   **[ç½‘ç»œæ¸¸æˆè§„åˆ™æ¸¸ä¹åœº](https://play.netlify.com/redirects)**
*   **[[æ”¯æŒæŒ‡å—]æˆ‘å¯ä»¥åœ¨ä¸€ä¸ªç«™ç‚¹ä¸­éƒ¨ç½²å¤šä¸ªå­˜å‚¨åº“å—ï¼Ÿ](https://answers.netlify.com/t/support-guide-can-i-deploy-multiple-repositories-in-a-single-site/179)**