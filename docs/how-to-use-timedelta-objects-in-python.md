# å¦‚ä½•åœ¨ Python ä¸­ä½¿ç”¨ timedelta å¯¹è±¡å¤„ç†æ—¥æœŸ

> åŸæ–‡ï¼š<https://www.freecodecamp.org/news/how-to-use-timedelta-objects-in-python/>

### ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ timedelta å¯¹è±¡ï¼Ÿ

å½“æ‚¨åœ¨ Python ä¸­å¤„ç†æ—¥æœŸå’Œæ—¶é—´æ—¶ï¼Œæ‚¨å°†ç»å¸¸ä½¿ç”¨`datetime`æ¨¡å—ã€‚

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•åœ¨`datetime`æ¨¡å—ä¸­ä½¿ç”¨`timedelta`å¯¹è±¡ã€‚å®ƒè¡¨ç¤ºä¸€æ®µæ—¶é—´ï¼Œå½“æˆ‘ä»¬éœ€è¦å¯¹ datetime å¯¹è±¡æ‰§è¡Œç®€å•çš„ç®—æœ¯è¿ç®—æ—¶ï¼Œå®ƒä¼šæœ‰æ‰€å¸®åŠ©ã€‚

ç‰¹åˆ«æ˜¯ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•é€šè¿‡ä»£ç ç¤ºä¾‹å®Œæˆä»¥ä¸‹å·¥ä½œ:

1.  åˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„`timedelta`å¯¹è±¡
2.  æ‰“å°å½“å‰æ—¥æœŸå’Œæ—¶é—´
3.  è®¡ç®—æœªæ¥çš„æ—¥æœŸ
4.  è®¡ç®—è¿‡å»çš„æ—¥æœŸ
5.  è®¡ç®—ä»ç‰¹å®šäº‹ä»¶å¼€å§‹ç»è¿‡çš„æ—¶é—´æˆ–ç‰¹å®šäº‹ä»¶å‘ç”Ÿçš„å‰©ä½™æ—¶é—´

### å¿…è¦çš„è¿›å£

åœ¨æˆ‘ä»¬å¼€å§‹è¿™äº›ä»»åŠ¡ä¹‹å‰ï¼Œè®©æˆ‘ä»¬é¦–å…ˆå¯¼å…¥å¿…è¦çš„æ¨¡å—ï¼Œå¦‚ä¸‹é¢çš„ä»£ç ç‰‡æ®µæ‰€ç¤º:

```
# Import Necessary Modules
from datetime import date
from datetime import time
from datetime import datetime
from datetime import timedelta
```

## å¦‚ä½•ç”¨ Python åˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„ timedelta å¯¹è±¡

ç°åœ¨è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„`timedelta`å¯¹è±¡ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```
time_delt1 = timedelta(days= 270, hours = 9, minutes = 18)
print(time_delt1)

# Sample Output
270 days, 9:18:00
```

æˆ‘ä»¬å·²ç»æˆåŠŸåˆ›å»ºäº†ä¸€ä¸ª`timedelta`å¯¹è±¡ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªå‚è€ƒæ—¶é—´ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åº”ç”¨å·²ç»åˆ›å»ºçš„`timedelta`å¯¹è±¡æ¥æ‰§è¡Œæœ‰æ„ä¹‰çš„è¿ç®—ã€‚è®©æˆ‘ä»¬åœ¨ä¸‹ä¸€æ­¥åšé‚£ä»¶äº‹ã€‚

## å¦‚ä½•ç”¨ Python æ‰“å°å½“å‰æ—¥æœŸå’Œæ—¶é—´

ä¸ºäº†åº”ç”¨æˆ‘ä»¬ä½¿ç”¨`timedelta`å¯¹è±¡åˆ›å»ºçš„èŒƒå›´ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å½“å‰çš„æ—¥æœŸå’Œæ—¶é—´ä½œä¸ºå‚è€ƒã€‚

æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨`datetime`å¯¹è±¡ä¸Šçš„`now()` æ–¹æ³•æ¥è·å–å½“å‰æ—¥æœŸå’Œæ—¶é—´ï¼Œå¦‚ä¸‹é¢çš„ä»£ç ç‰‡æ®µæ‰€ç¤º:

```
# to create reference, use current date and time
time_now = datetime.now()
print(time_now)

# Sample Output
2021-06-22 17:49:18.574503
```

## å¦‚ä½•ç”¨ Python è®¡ç®—æœªæ¥çš„æ—¥æœŸ

ç°åœ¨è®©æˆ‘ä»¬è®¡ç®—ä¸€ä¸‹åœ¨ç¬¬ä¸€æ­¥ä¸­åˆ›å»ºçš„`time_delt1`ä¹‹åçš„æ—¥æœŸã€‚

è¦è®¡ç®—æœªæ¥çš„æ—¶é—´ç‚¹ï¼Œæˆ‘ä»¬åªéœ€å°†ç”±`timedelta`å¯¹è±¡å®šä¹‰çš„è·¨åº¦åŠ åˆ°å½“å‰æ—¶é—´ä¸Šã€‚

```
# check what date it'll be after time_delt1
future_date1 = time_now + time_delt1
print(future_date1)

# Sample Output
2022-03-20 03:07:18.574503
```

ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ¥çœ‹å¦ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬æƒ³çŸ¥é“åœ¨ç‰¹å®šçš„å‡ å¤©åï¼Œæ¯”å¦‚è¯´ 189 å¤©åæ˜¯å“ªä¸€å¤©ã€‚

```
# What day will it be after 189 days
future_date2 = time_now + timedelta(days=189)
print(future_date2)

# Sample Output
2021-12-28 17:49:18.574503
```

## å¦‚ä½•ç”¨ Python è®¡ç®—è¿‡å»çš„æ—¥æœŸ

ç°åœ¨ä½ å¯èƒ½å·²ç»çŒœåˆ°äº†ï¼Œè¦æ‰¾å‡º 189 å¤©å‰æ˜¯å“ªä¸€å¤©ï¼Œæˆ‘ä»¬åªéœ€å°†ä¸Šé¢ç¤ºä¾‹ä¸­çš„'+'æ›¿æ¢ä¸º'-'ã€‚æ‚¨å¯ä»¥åœ¨ä¸‹é¢çš„ä»£ç ç‰‡æ®µä¸­çœ‹åˆ°è¿™ä¸€ç‚¹:

```
# What day would it have been 189 days ago
past_date1 = time_now - timedelta(days=189)
print(past_date1)

# Sample Output
2020-12-15 17:49:18.574503
```

## å¦‚ä½•åœ¨ Python ä¸­è®¡ç®—ç»è¿‡çš„æ—¶é—´æˆ–å‰©ä½™çš„æ—¶é—´

ç°åœ¨è®©æˆ‘ä»¬è®¡ç®—ä¸€ä¸‹ç¦»ä»Šå¹´çš„æ•™å¸ˆèŠ‚è¿˜å‰©å¤šå°‘æ—¶é—´ã€‚æˆ‘ä»¬å¯ä»¥è¿™æ ·åšã€‚

ä¸ºäº†å‚ç…§ä»Šå¤©è¿›è¡Œè®¡ç®—ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ date å¯¹è±¡ä¸Šçš„`today()`æ–¹æ³•æ¥æ£€ç´¢ä»Šå¤©çš„æ—¥æœŸ:

`Syntax: today = date.today() #Returns today's date`

```
# create reference objects for today, and teachers' day
teachers_day = date(time_now.year, 9, 5)
today = date.today()
```

ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ä»£ç ç‰‡æ®µæ¥æ‰¾å‡ºç¦»æœªæ¥çš„æ•™å¸ˆèŠ‚è¿˜æœ‰å¤šè¿œ:

```
# calculate number of days to teachers' day.
time_to_td = teachers_day - today
print(f"Teachers' day is {time_to_td.days} days away")

# Sample Output
Teachers' day is 74 days away
```

å½“ä½ è¯»åˆ°è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œä»Šå¹´çš„æ•™å¸ˆèŠ‚ä¹Ÿå¯èƒ½å·²ç»è¿‡å»äº†ğŸ˜€ã€‚å¦‚æœä»Šå¹´çš„æ•™å¸ˆèŠ‚å·²ç»è¿‡äº†ï¼Œè¯·åšä»¥ä¸‹äº‹æƒ…:

*   å°†å…´è¶£æ—¥æœŸæ›´æ–°ä¸ºä¸‹ä¸€å¹´çš„æ•™å¸ˆèŠ‚æ—¥æœŸã€‚
*   ç®—ç®—ç¦»æ˜å¹´æ•™å¸ˆèŠ‚è¿˜æœ‰å‡ å¤©ã€‚

ä¸‹é¢çš„ä»£ç ç‰‡æ®µè¯´æ˜äº†è¿™ä¸€ç‚¹:

```
# check if teachers' day has passed
if teachers_day < today:
  print(f"This year's Teachers' Day was {(today-teachers_day).days} days ago")
  time_to_td = teachers_day - today
  print(f"Next year's Teachers' day is {time_to_td.days} days away")
```

## å¿«é€Ÿå›é¡¾ä¸€ä¸‹

æ€»çš„æ¥è¯´ï¼Œæˆ‘ä»¬å·²ç»çœ‹åˆ°äº†å¦‚ä½•ä½¿ç”¨`timedelta`å¯¹è±¡å¯¹æ—¥æœŸæ‰§è¡Œç®€å•çš„ç®—æœ¯è¿ç®—ï¼Œå¹¶è®¡ç®—è¿‡å»å’Œæœªæ¥çš„æ—¥æœŸã€‚

æˆ‘ä»¬è¿˜å¯ä»¥è®¡ç®—ä»ç‰¹å®šäº‹ä»¶å¼€å§‹ç»è¿‡çš„æ—¶é—´æˆ–ç‰¹å®šäº‹ä»¶å‘ç”Ÿå‰çš„å‰©ä½™æ—¶é—´ã€‚

å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼

æ›´è¯¦ç»†çš„å‚è€ƒèµ„æ–™ï¼Œè¯·æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£[è¿™é‡Œ](https://docs.python.org/3/library/datetime.html)ã€‚